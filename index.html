<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thiệp Trung Thu ✧ Mooncake cho bạn gái cute</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Be+Vietnam+Pro:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --night-1: #0b1026; /* deep indigo */
        --night-2: #1a1f3b; /* softer indigo */
        --moon: #ffe89a; /* warm moon */
        --gold: #f5c358; /* lantern gold */
        --lantern: #f84545; /* lantern red */
        --pink: #ff8fb7; /* cute accent */
        --mint: #84ffc9; /* accent */
        --glow: #ffd166; /* soft glow */
        --text: #f7fafc;
        --soft: #cbd5e1;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: radial-gradient(
          1000px 700px at 70% 20%,
          #1f2858 0%,
          var(--night-1) 45%,
          #070a18 100%
        );
        color: var(--text);
        font-family: "Be Vietnam Pro", system-ui, -apple-system, Segoe UI,
          Roboto, Arial, sans-serif;
        overflow: hidden;
      }

      /* Twinkling stars */
      .stars,
      .stars:after {
        position: fixed;
        inset: -200px;
        background-repeat: repeat;
        z-index: 0;
      }
      .stars {
        background-image: radial-gradient(
            2px 2px at 20px 30px,
            #ffffffcc 40%,
            transparent 41%
          ),
          radial-gradient(2px 2px at 120px 80px, #c9e6ffcc 40%, transparent 41%),
          radial-gradient(
            1.5px 1.5px at 200px 160px,
            #ffffffb8 40%,
            transparent 41%
          );
        background-size: 200px 200px, 260px 260px, 300px 300px;
        animation: twinkle 16s linear infinite;
        filter: drop-shadow(0 0 2px #fff7);
      }
      .stars:after {
        content: "";
        background-image: radial-gradient(
            2px 2px at 60px 120px,
            #fff9 40%,
            transparent 41%
          ),
          radial-gradient(1.5px 1.5px at 180px 40px, #fff6 40%, transparent 41%);
        background-size: 240px 240px, 320px 320px;
        animation: twinkle 22s linear infinite reverse;
        opacity: 0.8;
      }
      @keyframes twinkle {
        from {
          transform: translate3d(0, 0, 0);
        }
        to {
          transform: translate3d(-300px, -200px, 0);
        }
      }

      /* Moon */
      .moon {
        position: fixed;
        top: 6vh;
        right: 8vw;
        width: min(26vmin, 260px);
        aspect-ratio: 1;
        border-radius: 50%;
        background: radial-gradient(
            120% 120% at 30% 30%,
            #fff 0%,
            var(--moon) 45%,
            #ffd988 65%,
            #eecc6a 80%,
            transparent 90%
          ),
          radial-gradient(60% 60% at 65% 65%, #0002 0%, #0000 70%);
        box-shadow: 0 0 40px 10px #ffd76a55, 0 0 100px 30px #ffe9a955;
        z-index: 1;
      }

      /* Clouds */
      .clouds {
        position: fixed;
        inset: 0;
        z-index: 1;
        pointer-events: none;
      }
      .cloud {
        position: absolute;
        top: 15vh;
        left: -30vw;
        width: 34vw;
        height: 14vw;
        background: radial-gradient(
          closest-side,
          #ffffff10,
          #ffffff05,
          #ffffff00 70%
        );
        border-radius: 10vw;
        filter: blur(2px);
        animation: float linear infinite;
      }
      .cloud.c2 {
        top: 28vh;
        animation-duration: 70s;
        height: 12vw;
        width: 28vw;
        opacity: 0.6;
      }
      .cloud.c3 {
        top: 40vh;
        animation-duration: 95s;
        height: 16vw;
        width: 38vw;
        opacity: 0.45;
      }
      @keyframes float {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(140vw);
        }
      }

      /* Hanging lanterns */
      .lanterns {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 40vh;
        z-index: 2;
        pointer-events: none;
      }
      .lantern-wrap {
        position: absolute;
        top: -8vh;
        transform-origin: top center;
        animation: sway 4.2s ease-in-out infinite;
      }
      .lantern-wrap:nth-child(1) {
        left: 12vw;
        animation-duration: 4.6s;
      }
      .lantern-wrap:nth-child(2) {
        left: 26vw;
        animation-duration: 5s;
      }
      .lantern-wrap:nth-child(3) {
        left: 64vw;
        animation-duration: 4.4s;
      }
      @keyframes sway {
        0%,
        100% {
          transform: rotate(-4deg);
        }
        50% {
          transform: rotate(4deg);
        }
      }
      .string {
        width: 2px;
        height: 10vh;
        margin: 0 auto;
        background: linear-gradient(#fff6, #fff1);
        box-shadow: 0 0 6px #fff3;
      }
      .lantern {
        width: 70px;
        height: 80px;
        margin: 0 auto;
        border-radius: 40px;
        background: radial-gradient(
          circle at 50% 30%,
          #ffb4b4 0%,
          #f96e6e 60%,
          #b40f0f 100%
        );
        box-shadow: 0 0 24px 6px #ff9494aa, inset 0 0 12px 2px #fff5;
        position: relative;
      }
      .lantern:before,
      .lantern:after {
        content: "";
        position: absolute;
        left: 8px;
        right: 8px;
        height: 6px;
        background: linear-gradient(#7a0000, #ffaeae);
        border-radius: 4px;
      }
      .lantern:before {
        top: 8px;
      }
      .lantern:after {
        bottom: 8px;
      }
      .tassel {
        width: 2px;
        height: 28px;
        background: linear-gradient(#ffd3a1, #c27d00);
        margin: 6px auto 0;
        position: relative;
        box-shadow: 0 0 8px #ffc966;
      }
      .tassel:after {
        content: "";
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--gold);
        position: absolute;
        left: -3px;
        top: -4px;
        box-shadow: 0 0 10px 3px #ffda7a;
      }

      /* Center stage */
      .stage {
        position: relative;
        z-index: 3;
        height: 100%;
        display: grid;
        place-items: center;
        text-align: center;
        padding: 24px;
      }

      .card {
        width: min(900px, 92vw);
        background: linear-gradient(180deg, #ffffff08, #ffffff03);
        border: 1px solid #ffffff22;
        border-radius: 24px;
        backdrop-filter: blur(12px);
        box-shadow: 0 20px 60px #0008, 0 0 0 1px #ffffff11 inset;
        padding: clamp(16px, 4vw, 36px);
      }

      .headline {
        font-family: Pacifico, cursive;
        font-weight: 400;
        font-size: clamp(28px, 5vw, 48px);
        letter-spacing: 0.5px;
        color: #fff;
        text-shadow: 0 4px 18px #ffc36a55, 0 0 2px #fff;
      }
      .sub {
        margin-top: 6px;
        color: var(--soft);
        font-size: clamp(14px, 2.4vw, 18px);
      }

      .mooncake-wrap {
        display: grid;
        grid-template-columns: 1fr;
        justify-items: center;
        gap: 20px;
        margin-top: 22px;
      }

      .mooncake {
        width: min(320px, 60vw);
        aspect-ratio: 1;
        position: relative;
        border-radius: 28px;
        display: grid;
        place-items: center;
        background: radial-gradient(
          120% 120% at 30% 30%,
          #ffe2a8 0%,
          #f1bd62 55%,
          #c98d2b 100%
        );
        box-shadow: 0 12px 0 #8a5a12, 0 18px 28px #0009, inset 0 0 0 8px #f8d48f,
          inset 0 0 0 20px #eab862;
        animation: levitate 4s ease-in-out infinite;
        cursor: pointer;
      }
      @keyframes levitate {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      .mooncake:after {
        content: "";
        position: absolute;
        inset: -8px;
        border-radius: 32px;
        box-shadow: 0 0 60px 16px #ffd16655;
      }

      /* Mooncake pattern (SVG) */
      svg.logo {
        width: 72%;
        filter: drop-shadow(0 4px 0 #8a5a12aa) drop-shadow(0 8px 14px #0007);
      }
      .petal {
        fill: #c77b16;
      }
      .crest {
        fill: #9d6410;
      }
      .text-band {
        fill: #a36206;
      }

      .wish {
        margin-top: 18px;
        font-size: clamp(16px, 3.2vw, 20px);
        color: #ffe9bd;
      }
      .name {
        color: #ffdee5;
        font-weight: 700;
      }

      .btns {
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 18px;
      }
      .btn {
        --bg: #ff7aa2;
        --bg2: #ffb3c9;
        border: none;
        padding: 12px 18px;
        border-radius: 999px;
        color: #2b0b19;
        font-weight: 800;
        letter-spacing: 0.4px;
        cursor: pointer;
        background: linear-gradient(180deg, var(--bg), var(--bg2));
        box-shadow: 0 10px 20px #ff7aa244, 0 2px 0 0 #b23a59 inset;
        transition: transform 0.15s ease, filter 0.2s ease;
      }
      .btn:hover {
        transform: translateY(-2px);
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn.alt {
        --bg: #ffd166;
        --bg2: #ffecb3;
        color: #4c3400;
        box-shadow: 0 10px 20px #ffd16655, 0 2px 0 0 #b68600 inset;
      }

      /* Footer */
      .footer {
        margin-top: 22px;
        font-size: 12px;
        color: #c0c7dd;
      }

      /* Canvas for confetti/sparkles */
      #fx {
        position: fixed;
        inset: 0;
        z-index: 4;
        pointer-events: none;
      }

      /* Tooltip bubble */
      .bubble {
        position: absolute;
        background: #1e293b;
        color: #e2e8f0;
        border: 1px solid #ffffff22;
        padding: 8px 10px;
        border-radius: 10px;
        font-size: 13px;
        box-shadow: 0 10px 24px #0008;
        opacity: 0;
        transform: translateY(6px);
        transition: 0.25s;
        white-space: nowrap;
      }
      .mooncake:hover .bubble {
        opacity: 1;
        transform: translateY(0);
      }

      /* Responsive two-column for wide screens */
      @media (min-width: 980px) {
        .mooncake-wrap {
          grid-template-columns: 1.2fr 0.8fr;
          align-items: center;
        }
        .text-area {
          text-align: left;
        }
        .headline {
          text-align: left;
        }
        .sub {
          text-align: left;
        }
        .wish {
          text-align: left;
        }
        .btns {
          justify-content: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="fx"></canvas>
    <div class="stars"></div>
    <div class="moon" aria-hidden="true"></div>

    <div class="clouds" aria-hidden="true">
      <div class="cloud" style="animation-duration: 80s"></div>
      <div class="cloud c2"></div>
      <div class="cloud c3"></div>
    </div>

    <div class="lanterns" aria-hidden="true">
      <div class="lantern-wrap">
        <div class="string"></div>
        <div class="lantern"></div>
        <div class="tassel"></div>
      </div>
      <div class="lantern-wrap">
        <div class="string"></div>
        <div class="lantern"></div>
        <div class="tassel"></div>
      </div>
      <div class="lantern-wrap">
        <div class="string"></div>
        <div class="lantern"></div>
        <div class="tassel"></div>
      </div>
    </div>

    <main class="stage">
      <section class="card">
        <h1 class="headline">
          Trung Thu Lung Linh ✧ Mooncake Cho
          <span style="color: #ffd166; text-shadow: 0 0 12px #ffd16688"
            >Thí Hìn Cute</span
          >
        </h1>
        <p class="sub">
          Đêm rằm có trăng vàng, đèn lồng đỏ và chiếc bánh nhỏ xinh dành riêng
          cho Thí Hìn ♡
        </p>

        <div class="mooncake-wrap">
          <!-- Mooncake -->
          <div class="mooncake" id="mooncake" title="Chạm để nhận điều ước!">
            <div
              class="bubble"
              style="left: 50%; bottom: 100%; transform: translate(-50%, 6px)"
            >
              Chạm để ✨ tung hoa & gửi lời chúc
            </div>
            <svg class="logo" viewBox="0 0 200 200" aria-label="Mooncake">
              <!-- outer scallop -->
              <defs>
                <radialGradient id="g1" cx="30%" cy="30%" r="100%">
                  <stop offset="0%" stop-color="#ffe7b1" />
                  <stop offset="60%" stop-color="#f1bd62" />
                  <stop offset="100%" stop-color="#c98d2b" />
                </radialGradient>
              </defs>
              <g>
                <circle
                  cx="100"
                  cy="100"
                  r="88"
                  fill="url(#g1)"
                  stroke="#8a5a12"
                  stroke-width="6"
                />
                <!-- scalloped edge -->
                <g
                  fill="#e3aa4b"
                  stroke="#9d6410"
                  stroke-width="2"
                  opacity=".9"
                >
                  <!-- create petals around -->
                  <g transform="translate(100,100)">
                    <!-- 16 petals -->
                    <template id="petal"></template>
                    <script>
                      // This script tag is inert inside SVG; petals drawn via
                      outer JS
                    </script>
                  </g>
                </g>
                <!-- center motif -->
                <g transform="translate(100,100)">
                  <circle
                    r="46"
                    fill="#f6cd78"
                    stroke="#a86d14"
                    stroke-width="4"
                  ></circle>
                  <g fill="#c77b16">
                    <path
                      d="M0-32 a32 32 0 0 1 0 64 a32 32 0 0 1 0 -64z"
                      fill="none"
                      stroke="#b77718"
                      stroke-width="2"
                    />
                    <circle r="4" />
                    <g opacity=".9">
                      <path d="M0-26 l8 12 l-8 12 l-8-12z" />
                      <path d="M26 0 l-12 8 l-12-8 l12-8z" />
                      <path d="M0 26 l-8-12 l8-12 l8 12z" />
                      <path d="M-26 0 l12-8 l12 8 l-12 8z" />
                    </g>
                  </g>
                  <rect
                    x="-30"
                    y="-10"
                    width="60"
                    height="20"
                    rx="8"
                    class="text-band"
                  />
                  <text
                    x="0"
                    y="4"
                    text-anchor="middle"
                    font-family="Pacifico"
                    font-size="16"
                    fill="#3e2500"
                  >
                    Yêu Thương
                  </text>
                </g>
              </g>
            </svg>
          </div>

          <!-- Text area -->
          <div class="text-area">
            <p class="wish" id="wish">
              Gửi
              <span class="name" contenteditable="true" spellcheck="false"
                >Thí Hìn cute</span
              >
              một chiếc bánh thơm lừng, chúc Em bé luôn <b>vui vẻ</b>,
              <b>bình an</b> và <b>rạng rỡ</b> như ánh trăng đêm rằm! 🌕🎋
            </p>
            <div class="btns">
              <button class="btn" id="btnConfetti">
                💖 Tung hoa chúc mừng
              </button>
              <button class="btn alt" id="btnShine">✨ Tăng lung linh</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      // ----------- Draw scallop petals around the mooncake (outside SVG scripting is easier) -----------
      (function drawPetals() {
        const svg = document.querySelector("svg.logo");
        const group = svg.querySelector("g > g");
        // Add 16 small petals around edge
        const petals = 16;
        const R = 72;
        const r = 10;
        for (let i = 0; i < petals; i++) {
          const a = (i / petals) * Math.PI * 2;
          const cx = 100 + Math.cos(a) * R;
          const cy = 100 + Math.sin(a) * R;
          const el = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "circle"
          );
          el.setAttribute("cx", cx);
          el.setAttribute("cy", cy);
          el.setAttribute("r", r);
          el.setAttribute("fill", "#e3aa4b");
          el.setAttribute("stroke", "#9d6410");
          el.setAttribute("stroke-width", "2");
          svg.firstElementChild.appendChild(el);
        }
      })();

      // ----------- FX Canvas (confetti & sparkles) -----------
      const canvas = document.getElementById("fx");
      const ctx = canvas.getContext("2d");
      let W,
        H,
        DPR = Math.min(2, window.devicePixelRatio || 1);
      function resize() {
        W = canvas.width = innerWidth * DPR;
        H = canvas.height = innerHeight * DPR;
      }
      addEventListener("resize", resize);
      resize();

      const pieces = [];
      function spawnConfetti(x, y, count = 160) {
        for (let i = 0; i < count; i++) {
          const ang = Math.random() * Math.PI * 2;
          const speed = 2 + Math.random() * 6;
          pieces.push({
            x: x * DPR,
            y: y * DPR,
            vx: Math.cos(ang) * speed * DPR,
            vy: Math.sin(ang) * speed * DPR - 3 * DPR,
            r: 4 + Math.random() * 8,
            rot: Math.random() * Math.PI,
            vr: (Math.random() - 0.5) * 0.2,
            shape: Math.random() < 0.5 ? "rect" : "circ",
            life: 120 + Math.random() * 80,
            hue: Math.floor(330 + Math.random() * 60) % 360, // pinkish range
          });
        }
      }
      function sparkle() {
        const x = Math.random() * W,
          y = Math.random() * H * 0.6;
        pieces.push({
          x,
          y,
          vx: (Math.random() - 0.5) * 0.2,
          vy: 0.4 + Math.random() * 0.4,
          r: 2 + Math.random() * 2,
          rot: 0,
          vr: 0,
          shape: "star",
          life: 80 + Math.random() * 80,
          hue: 50 + Math.random() * 40,
        });
      }
      setInterval(sparkle, 320);

      function tick() {
        ctx.clearRect(0, 0, W, H);
        for (let i = pieces.length - 1; i >= 0; i--) {
          const p = pieces[i];
          p.life--;
          if (p.life <= 0) {
            pieces.splice(i, 1);
            continue;
          }
          p.vy += 0.06 * DPR;
          p.vx *= 0.995;
          p.vy *= 0.995;
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.globalAlpha = Math.max(0, Math.min(1, p.life / 60));
          if (p.shape === "rect") {
            ctx.fillStyle = `hsl(${p.hue} 90% 70%)`;
            ctx.fillRect(-p.r, -p.r, p.r * 2, p.r * 2);
          } else if (p.shape === "circ") {
            const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, p.r);
            grad.addColorStop(0, `hsl(${p.hue} 100% 85%)`);
            grad.addColorStop(1, `hsl(${p.hue} 80% 55%)`);
            ctx.fillStyle = grad;
            ctx.beginPath();
            ctx.arc(0, 0, p.r, 0, Math.PI * 2);
            ctx.fill();
          } else {
            // star
            ctx.fillStyle = `hsl(${p.hue} 95% 70%)`;
            ctx.beginPath();
            for (let k = 0; k < 5; k++) {
              const a = (k * 2 * Math.PI) / 5;
              ctx.lineTo(Math.cos(a) * p.r, Math.sin(a) * p.r);
              ctx.lineTo(
                Math.cos(a + Math.PI / 5) * p.r * 0.4,
                Math.sin(a + Math.PI / 5) * p.r * 0.4
              );
            }
            ctx.closePath();
            ctx.fill();
          }
          ctx.restore();
        }
        requestAnimationFrame(tick);
      }
      tick();

      // Buttons
      const mc = document.getElementById("mooncake");
      mc.addEventListener("click", (e) => {
        const rect = mc.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;
        spawnConfetti(x, y, 200);
        mc.animate(
          [
            { transform: "translateY(0) rotate(0)" },
            { transform: "translateY(-8px) rotate(-2deg)" },
            { transform: "translateY(0) rotate(0)" },
          ],
          { duration: 600, easing: "ease-out" }
        );
      });

      document.getElementById("btnConfetti").addEventListener("click", () => {
        spawnConfetti(innerWidth / 2, innerHeight * 0.45, 260);
      });

      let shine = 0;
      document.getElementById("btnShine").addEventListener("click", () => {
        shine = (shine + 1) % 3;
        const bg = document.body.style.backgroundImage;
        document.body.style.transition = "filter .6s ease";
        document.body.style.filter =
          shine === 1
            ? "saturate(1.25) brightness(1.1)"
            : shine === 2
            ? "saturate(1.45) brightness(1.18)"
            : "saturate(1) brightness(1)";
      });

      // Gentle typewriter effect for the wish (first load)
      (function typeWish() {
        const el = document.getElementById("wish");
        const full = el.textContent.trim();
        el.textContent = "";
        let i = 0;
        const speed = 18; // ms per char
        const timer = setInterval(() => {
          el.textContent = full.slice(0, ++i);
          if (i >= full.length) clearInterval(timer);
        }, speed);
      })();
    </script>
  </body>
</html>
